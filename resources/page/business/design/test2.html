<!DOCTYPE html>
<html lang="cn">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="ie=edge" http-equiv="X-UA-Compatible">
    <title>Layui-Tinymce</title>
    <script src="../../../lib/layui-v2.5.5/layui.js"></script>
    <link href="../../../lib/layui-v2.5.5/css/layui.css" rel="stylesheet">
</head>
<body>
<textarea id="edits" name="">这里是<span style="color: #e03e2d;"><em>edits初始化</em></span>的内容</textarea>
<hr/>
<div class="layui-btn-group" style="margin-top: 10px">
    <button class="layui-btn" lay-event="setContent">设置内容</button>
    <button class="layui-btn" lay-event="insertContent">插入内容</button>
    <button class="layui-btn" lay-event="getContent">获取内容</button>
    <button class="layui-btn" lay-event="getText">获取文本</button>
    <button class="layui-btn" lay-event="clearContent">清空内容</button>
    <button class="layui-btn" lay-event="reload">重载编辑器</button>
    <button class="layui-btn" lay-event="destroy">销毁编辑器</button>
    <button class="layui-btn" lay-event="render">加载编辑器</button>
</div>

<script>
    /^http(s*):\/\//.test(location.href) || alert('请先部署到 localhost 下再访问');
    layui.extend({
        tinymce: '{/}./tinymce/tinymce'
    }).use(['tinymce', 'util', 'layer'], function () {
        var t = layui.tinymce
        var util = layui.util;

        var edits = t.render({
            elem: "#edits",
            width: 800
            , height: 600
            // ...
            // 其余配置可参考官方文档
        }, (opt) => {
            //加载完成后回调
        });

        util.event('lay-event', {
            getContent: () => {
                var content = t.get('#edits').getContent()
                layer.alert(content)
            },
            setContent: () => {
                t.get('#edits').setContent('点击按钮设置的内容：<span style="color: #e03e2d;">' + new Date() + '</span>')
            },
            clearContent: () => {
                t.get('#edits').setContent('')
            },
            insertContent: () => {
                t.get('#edits').insertContent('<b>插入内容</b>')
            },
            getText: () => {
                var text = t.get('#edits').getContent({format: 'text'})
                layer.alert(text)
            },
            reload: () => {
                t.reload({
                    elem: '#edits'
                    // 所有参数都可以重新设置 ...
                }, (opt) => {
                    //重载完成后回调函数，会把所有参数回传，
                    //重载仅仅重新渲染编辑器，不会清空textarea，可手动清空或设置
                    t.get('#edits').setContent('')
                })
            },
            destroy: () => {
                t.get('#edits').destroy()
            },
            render: () => {
                t.render({elem: '#edits', height: '500px'})
            }
        });


    });
</script>
</body>
</html>
